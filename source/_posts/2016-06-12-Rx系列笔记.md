---
title: Rx系列学习笔记
date: 2016-06-12 17:22:44
tags: Android
---

闲来无事，填下很久以前就留下的坑，Rx系列也出来很久了，当直到现在才开始学习。暂时包括RxJava和RxAndroid。这篇文章主要记录在学习中的问题。

PS：如果文章有问题，麻烦指正。

<!-- more -->
## RxJava
RxJava的Rx系列的基础，所以从这儿开始。
参考资料：[给 Android 开发者的 RxJava 详解](http://gank.io/post/560e15be2dca930e00da1083)

### RxJava和EventBus的区别和类比
由于之前学习使用过EventBus，所以学习的时候用EventBus进行对比，刚开始两种的观察者和订阅的概念有点混淆，在骚扰了Android Studio B群的 @Wesley.H 同学之后大概得到下面的类比：
```
		//以下代码对比的对象都是EventBus
  
		//观察者，相当于接收器 onMainThread(Event event)
        Observer observer=new Observer<String>() {
            @Override
            public void onCompleted() {

            }

            @Override
            public void onError(Throwable e) {

            }

            @Override
            public void onNext(String s) {
                LogUtil.e("onNext",s);
            }

        };

        //相当于一个即将Post的 Event
        Observable observable=Observable.create(new Observable.OnSubscribe<String>() {
            @Override
            public void call(Subscriber<? super String> subscriber) {
                subscriber.onNext("hello");
            }
        });

        //将事件post出去
        observable.subscribe(observer);```
		
### 变换
变换的概念理解并使用起来并不困难，就是在发送数据之前先做N次（取决你调用了几次变换的方法）处理，再把处理的结果发送到目标点。难点在于变换的原理。
* ``map()``方法是最简单的变换。
* ``flatMap()``是“嵌套”的``map()``————这是我个人的理解。
```
Observable.just("1","2","3").flatMap(new Func1<String, Observable<String>>() {
            @Override
            public Observable<String> call(final String s) {
                return Observable.create(new Observable.OnSubscribe<String>() {
                    @Override
                    public void call(Subscriber<? super String> subscriber) {
                        subscriber.onNext(s+":map1");
                    }
                });
            }
        }).subscribe(new Action1<String>() {
            @Override
            public void call(String s) {
                LogUtil.e("action",s);
            }
        });	```
控制台的输出信息是：
```
action: 1:map1
action: 2:map1
action: 3:map1```
说实话，*我对``flatMap()``和``map()``还是有点模糊，所以暂时留坑